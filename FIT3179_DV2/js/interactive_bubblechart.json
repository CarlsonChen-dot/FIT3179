{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 500,
    "height": 400,
    "title": "UK Rank vs. CWUR Score",
    "data": {
        "url": "https://raw.githubusercontent.com/CarlsonChen-dot/FIT3179/main/FIT3179_DV2/data/uk_universities.csv"
    },
    "transform": [
        {
            "calculate": "datum.Student_satisfaction_percentage * 100",
            "as": "Students_Satisfaction_Percentage"
        },
        {
            "filter": "Region_selection == null || datum.Region == Region_selection"
        }
    ],
    "params": [
        {
            "name": "Region_selection",
            "bind": {
                "input": "select",
                "options": [
                    null,
                    "East Midlands",
                    "East of England",
                    "London",
                    "North East England",
                    "North West England",
                    "Northern Ireland",
                    "Scotland",
                    "South East England",
                    "South West England",
                    "Wales",
                    "West Midlands",
                    "Yorkshire and the Humber"
                ],
                "labels": [
                    "Show All",
                    "East Midlands",
                    "East of England",
                    "London",
                    "North East England",
                    "North West England",
                    "Northern Ireland",
                    "Scotland",
                    "South East England",
                    "South West England",
                    "Wales",
                    "West Midlands",
                    "Yorkshire and the Humber"
                ],
                "name": "Region: "
            }
        }
    ],
    "encoding": {
        "x": {
            "field": "Estimated_cost_of_living_per_year_(in_pounds)",
            "type": "quantitative",
            "title": "Cost"
        },
        "y": {
            "field": "Students_Satisfaction_Percentage",
            "type": "quantitative"
            
        }
    },
    "layer": [
        {
            "mark": "circle",
            "encoding": {
                "x": {
                    "field": "Estimated_cost_of_living_per_year_(in_pounds)",
                    "type": "quantitative",
                    "title": "Cost"
                },
                "y": {
                    "field": "Students_Satisfaction_Percentage",
                    "type": "quantitative"
                },
                "color": {
                    "field": "Region",
                    "type": "nominal",
                    "scale": {
                        "domain": [
                            "East Midlands",
                            "East of England",
                            "London",
                            "North East England",
                            "North West England",
                            "Northern Ireland",
                            "Scotland",
                            "South East England",
                            "South West England",
                            "Wales",
                            "West Midlands",
                            "Yorkshire and the Humber"
                        ],
                        "range": [
                            "#1f77b4",
                            "#ff7f0e",
                            "#2ca02c",
                            "#d62728",
                            "#9467bd",
                            "#8c564b",
                            "#e377c2",
                            "#7f7f7f",
                            "#bcbd22",
                            "#17becf",
                            "#ff0000",
                            "#0000ff"
                        ]
                    }
                },
                "size": {
                    "value": 100
                },
                "opacity": {
                    "value": 1
                },
                "tooltip": [
                    {
                        "field": "University_name",
                        "type": "nominal"
                    },
                    {
                        "field": "UK_rank",
                        "type": "quantitative",
                        "format": ","
                    },
                    {
                        "field": "World_rank",
                        "type": "quantitative",
                        "format": ","
                    },
                    {
                        "field": "CWUR_score",
                        "type": "quantitative",
                        "format": ","
                    },
                    {
                        "field": "Estimated_cost_of_living_per_year_(in_pounds)",
                        "type": "quantitative",
                        "format": ","
                    },
                    {
                        "field": "International_Students_Percentage",
                        "type": "quantitative",
                        "format": ".2f",
                        "title": "International Students Percentage (%)"
                    }
                ]
            }
        },
        {
            "mark": {
                "type": "text",
                "align": "left",
                "baseline": "bottom",
                "fontSize": 10,
                "fontStyle": "italic"
            },
            "encoding": {
                "text": {
                    "field": "University_name",
                    "type": "nominal"
                },
                "color": {
                    "value": "black"
                },
                "opacity": {
                    "condition": {
                        "test": "datum.CWUR_score > 94 || datum.CWUR_score < 66",
                        "value": 1
                    },
                    "value": 0
                }
            }
        }
    ]
}